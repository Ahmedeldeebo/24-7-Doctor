<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />    
    <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>
    <script src="https://kit.fontawesome.com/ff8698dfe7.js" crossorigin="anonymous"></script>

    <title>Pharmacy Signup</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
  </head>
  <style>
    body {
  overflow-y:hidden;
}
  </style>
  <body>
    <!-----------------------------------------------Start Header------------------------------------------>
    <!--Start Hader-->
    <%- include ('../partials/nav.ejs') %>
    <!--End Hader-->

    <!-----------------------------------------------Start signup from --------------------------------------------->

    <div class="container"style="margin-top:100px">
      <div class="row my-2 mx-2 main">
        <!--left-column-->
        <div class="col-md-4 col-12" style="margin-top:130px">
          <!--image-->
          <img
            src="/img/PharSignup.png"
            width="100%"
            height="100%"
            class="img-thumbnail" 
          />
        </div>
        <!--right-column-->
        <div class="col-md-8 col-12 xcol">
          <h2 class="title pt-5 pb-3">Pharmacy Sign up</h2>
          <form
            class="myform row g-3 needs-validation"
            action="http://localhost:5000/pharmacy/Pharmcy-register"
            method="POST"
            validate
          >

          <!-- Pharmacy Name -->
            <div class="row rone">
              <div class="form-group col-md-6 fone py-3">
                <input
                  type="text"
                  class="form-control"
                  placeholder="Pharmacy Name"
                  autocomplete="off"
                  required =""
                  name="Phar_name"
                />
              </div>

              <!-- Pharmacy Address-->
              <div class="form-group col-md-6 ftwo py-3">
                <input
                  type="text"
                  class="form-control"
                  placeholder="Pharmacy Address"
                  autocomplete="off"
                  required =""
                  name="Phar_location"
                />
              </div>
            </div>

            <!-- Pharmacy Username -->
            <div class="row rtwo">
              <div class="form-group col-md-6 fthree py-3">
                <input
                  type="text"
                  class="form-control jk"
                  placeholder="Username"
                  autocomplete="off"
                  required =""
                  name="Phar_userName"
                />
              </div>
              <div class="form-group col-md-6 ffour py-3">
                <input
                  type="email"
                  class="form-control lm"
                  placeholder="....@gmail.com"
                  autocomplete="off"
                  required =""
                  name="Phar_Email"
                />
              </div>
            </div>
            <div class="row rthree">

              <div class="form-group col-md-6 ffive py-3 needs-validation" novalidate action="#" method="#" onsubmit="return false">
                
                <div class="input-group">
                  <div class="input-group-prepend">
                    <button class="input-group-text btn btn-default reveal" type="button"><i class="fa-solid fa-eye"></i></button>
                  </div>
                  <input   input type="password"
                  label for="validationPassword"
                  class="form-control pwd"
                  id="validationPassword"
                  minlength="8"
                  placeholder="Password"
                  autocomplete="off"
                  value="" required
                  name="Phar_Password"> 
                  <small id="passwordHelpBlock" class="form-text text-muted">
                        Your password must be 8-20 characters long,  must contain special characters "!@#$%&*_?", numbers, lower and upper letters only.
                  </small>
              
                      <!-- <div id="feedbackin" class="valid-feedback">
                        Strong Password!
                      </div> -->
                      <div id="feedbackirn" class="invalid-feedback">
                        Atlead 8 characters,
                        Number, Special Character 
                        Caplital Letter and Small letters
                      </div>
                </div>
                <!-- <input
                  input type="password"
                  label for="validationPassword"
                  class="form-control pwd"
                  id="validationPassword"
                  minlength="8"
                  placeholder="Password"
                  autocomplete="off"
                  value="" required
                  name="pat_password"

                /> -->
   
                <div  class="progress" style="height: 5px;">
                  <div id="progressbar" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 10%;" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100">
                    
                  </div>
                  </div>

                  
              </div>



              <div class="form-group col-md-6 fsix py-3">
                <input
                  type="text"
                  class="form-control"
                  placeholder="Tel. No"
                  autocomplete="off"
                  required =""
                  name="Phar_PhoneNumber"
                />
              </div>
            </div>
            <p class="text-center font-weight-bold">Remember your username and password</p>


                                
            <div class="row rfour">
              <!-- <div class="form-group col-md-6 fseven py-3">
                <select
                  class="form-select"
                  id="validationCustom04"
                  required
                  name="pat_Gender"
                >
                  <option selected disabled>Gender</option>
                  <option>Male</option>
                  <option>Female</option>
                </select>
              </div> 
              <div class="form-group col-md-6 feight py-3">
                <input type="date" class="form-control" placeholder="m/d/y"
                required name="pat_birthday">
               </div>
            </div> -->
            <div class="alert alert-light text-danger" role="alert">
              <%- errorMessage %>
            </div>

            <div class="row rfive">
              <div class="form-group col-md-6 fnine py-3">
                <div class="card-body">
                  <div class="wrapper text-left">
                      <button class="btn btn-primary" type="submit">Create an account</button>
                      <!-- onclick="sSuccess('success-message')" -->
                  </div>
              </div>
                                              
              <!-- // sSuccess = function(type) {
              // 'use strict';
              // if (type == 'success-message') {
              // swal({
              // title: 'Congratulations!',
              // text: 'Account Successfully Created',
              // type: 'success',
              // })
              
              // }else{
              // swal("Error occured !");
              // }
              // }
              
              // })(jQuery);
              //  -->
                <!-- <button type="submit" class="btn btn-primary">
                  <span>Create account</span>
                </button> -->
              </div>
              <div class="form-group col-md-6 ften py-3">
                <p class="text-muted">
                  Already have an account?<br /><a
                    href="http://localhost:5000/signin-Pharmacy"
                    >Sign in</a
                  >
                </p>
               
            </div>

      
          </form>
        </div>
        </div>
        </div>
        </div>


    <!-- <div class="container">
      <div class="text-center">
        <h2 class="my-5">Signup Now</h2>
        <p class="lead">Please fill-in the following:</p>
    </div >
          <div class=" container justify-content-center" >
            
              <form  action="http://localhost:5000/patient/register" method="POST" class="row g-3 needs-validation" novalidate>
                <div class="col-md-2 form-floating ">
                  <input type="text" class="form-control" id="validationCustom01" placeholder="Username" required name="Pat_username">
                  <label for="validationCustom01" class="form-label">Username</label>
                  <div class="valid-feedback">
                    Looks good!
                  </div>
                </div>
                <div class="col-md-2 form-floating">
                  <input type="text" class="form-control" id="validationCustom02" placeholder="Fisrt Name" required name="pat_FirstName">
                  <label for="validationCustom02" class="form-label">First name</label>
                  
                  <div class="valid-feedback">
                    Looks good!
                  </div>
                </div>
                <div class="col-md-2 form-floating">
                  <input type="text" class="form-control" id="validationCustom02" placeholder="Last Name" required name="pat_Lastname">
                  <label for="validationCustom02" class="form-label">Last name</label>
                  
                  <div class="valid-feedback">
                    Looks good!
                  </div>
                </div>
                <div class="col-md-3 form-floating">  
                  <input type="text" class="form-control" id="validationCustom03" placeholder="exmpale@gmail.com" required name="pat_Email">
                  <label for="validationCustom03" class="form-label">Email</label>
                
                  <div class="invalid-feedback">
                    Please provide a valid Email.
                  </div>
                </div>
                <div class="col-md-2 form-floating">
                  <select class="form-select" id="validationCustom04" required name="pat_Gender">
                    <option selected disabled >Gender</option>
                    <option>Male</option>
                    <option>Female</option>
                  </select>
                  <label for="validationCustom04" class="form-label">Gender</label>
                  
                  <div class="invalid-feedback">
                    Please select a valid state.
                  </div>
                </div>
                <div class="col-md-3 form-floating">
                  <input type="password" class="form-control" id="validationCustom05" placeholder="Password" required name="pat_password">
                  <label for="validationCustom05" class="form-label">Password</label>
                  <div class="invalid-feedback">
                    Please provide a valid zip.
                  </div>
                  <div class="col-md my-2 form-floating">
                    <input type="date" class="form-control" id="validationCustom05" placeholder="m/d/y" required name="pat_birthday">
                    <label for="validationCustom05" class="form-label">Brithday</label>
                    <div class="invalid-feedback">
                      Please provide a valid Date.
                    </div>
                </div>
                <div class=" form-floating">
                  <input type="text" class="form-control" id="validationCustom05" placeholder="Insurnas number" required name="pat_InsuranceNo">
                  <label for="validationCustom05" class="form-label">Insurance number</label>
                  <div class="invalid-feedback">
                    Please provide a valid zip.
                  </div>
                <div class="col-12">
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="invalidCheck" required>
                    <label class="form-check-label" for="invalidCheck">
                      Agree to terms and conditions
                    </label>
                    <div class="invalid-feedback">
                      You must agree before submitting.
                    </div>
                  </div>
                </div>
                <div class="col-12">

                  <button class="btn btn-primary" type="submit">Sign Up</button>
                </div>
            </form>
          </div>
          </div>
        </div>
      </div>
    </div> -->
    <!-----------------------------------------------End signup from --------------------------------------------->

    <script>
      $(".reveal").on('click',function() {
        var $pwd = $(".pwd");
        if ($pwd.attr('type') === 'password') {
            $pwd.attr('type', 'text');
        } else {
            $pwd.attr('type', 'password');
        }
    });
      (function() {
      'use strict';
      window.addEventListener('load', function() {
        // Fetch all the forms we want to apply custom Bootstrap validation styles to
        var forms = document.getElementsByClassName('needs-validation');
        // Loop over them and prevent submission
        var validation = Array.prototype.filter.call(forms, function(form) {
          // making sure password enters the right characters
        form.validationPassword.addEventListener('keypress', function(event){
          console.log("keypress");
          console.log("event.which: " + event.which);
          var checkx = true;
          var chr = String.fromCharCode(event.which);
          console.log("char: " + chr);
            
    
          var matchedCase = new Array();
          matchedCase.push("[!@#$%&*_?]"); // Special Character
          matchedCase.push("[A-Z]");      // Uppercase Alpabates
          matchedCase.push("[0-9]");      // Numbers
          matchedCase.push("[a-z]");
    
          for (var i = 0; i < matchedCase.length; i++) {
            if (new RegExp(matchedCase[i]).test(chr)) {
              console.log("checkx: is true");					
              checkx = false;
            }
          }	
          
          if(form.validationPassword.value.length >= 20)
            checkx = true;
          
          if ( checkx ) {
                    event.preventDefault();
                    event.stopPropagation();	  
                }
    
        });
        
        //Validate Password to have more than 8 Characters and A capital Letter, small letter, number and special character
        // Create an array and push all possible values that you want in password
        var matchedCase = new Array();
        matchedCase.push("[$@$$!%*#?&]"); // Special Character
        matchedCase.push("[A-Z]");      // Uppercase Alpabates
        matchedCase.push("[0-9]");      // Numbers
        matchedCase.push("[a-z]");     // Lowercase Alphabates
        
    
        form.validationPassword.addEventListener('keyup', function(){
        
        var messageCase = new Array();
        messageCase.push(" Special Character"); // Special Character
        messageCase.push(" Upper Case");      // Uppercase Alpabates
        messageCase.push(" Numbers");      // Numbers
        messageCase.push(" Lower Case");     // Lowercase Alphabates
    
        var ctr = 0;
        var rti = "";
        for (var i = 0; i < matchedCase.length; i++) {
          if (new RegExp(matchedCase[i]).test(form.validationPassword.value)) {
            if(i == 0) messageCase.splice(messageCase.indexOf(" Special Character"), 1);
            if(i == 1) messageCase.splice(messageCase.indexOf(" Upper Case"), 1);
            if(i == 2) messageCase.splice(messageCase.indexOf(" Numbers"), 1);
            if(i == 3) messageCase.splice(messageCase.indexOf(" Lower Case"), 1);
            ctr++;
            //console.log(ctr);
            //console.log(rti);
          }
        }		
        
        
        //console.log(rti);
        // Display it
        var progressbar = 0;
        var strength = "";
        var bClass = "";
        switch (ctr) {
        case 0:
        case 1: 
          strength = "Way too Weak";
          progressbar = 15;
          bClass = "bg-danger";
          break;
        case 2:
          strength = "Very Weak";
          progressbar = 25;
          bClass = "bg-danger";
          break;
        case 3:
          strength = "Weak";	
          progressbar = 34;
          bClass = "bg-warning";			
          break;
        case 4:
          strength = "Medium";
          progressbar = 65;
          bClass = "bg-warning";						
          break;
        }
        
        if (strength == "Medium" && form.validationPassword.value.length >= 8 ) {
          strength = "Strong";
          bClass = "bg-success";			
          form.validationPassword.setCustomValidity("");			
        } else {
          form.validationPassword.setCustomValidity(strength);
        }
    
        var sometext = "";
    
        if(form.validationPassword.value.length < 8 ){
          var lengthI = 8 - form.validationPassword.value.length;
          sometext += ` ${lengthI} more Characters, `;
        } 
    
        sometext += messageCase;
        console.log(sometext);
        
        console.log(sometext);
    
        if(sometext){
          sometext = " You Need" + sometext;
        }
    
    
        $("#feedbackin, #feedbackirn").text(strength + sometext);
        $("#progressbar").removeClass( "bg-danger bg-warning bg-success" ).addClass(bClass);
        var plength = form.validationPassword.value.length ;
        if(plength > 0) progressbar += ((plength - 0) * 1.75) ;
        //console.log("plength: " + plength);
        var  percentage = progressbar + "%";
        form.validationPassword.parentNode.classList.add('was-validated');
        //console.log("pacentage: " + percentage);
        $("#progressbar").width( percentage );
    
            if(form.validationPassword.checkValidity() === true){
              form.verifyPassword.disabled = false;
            } else {
              form.verifyPassword.disabled = true;
            }
                   
          
        }); 
          
    
          
        });
      }, false);
    })();
    $(document).ready(function() {
        $("#show_hide_password a").on('click', function(event) {
            event.preventDefault();
            if($('#show_hide_password input').attr("type") == "text"){
                $('#show_hide_password input').attr('type', 'password');
                $('#show_hide_password i').addClass( "fa-eye-slash" );
                $('#show_hide_password i').removeClass( "fa-eye" );
            }else if($('#show_hide_password input').attr("type") == "password"){
                $('#show_hide_password input').attr('type', 'text');
                $('#show_hide_password i').removeClass( "fa-eye-slash" );
                $('#show_hide_password i').addClass( "fa-eye" );
            }
        });
    });
    
    </script>
       
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css"></link>
</html>
